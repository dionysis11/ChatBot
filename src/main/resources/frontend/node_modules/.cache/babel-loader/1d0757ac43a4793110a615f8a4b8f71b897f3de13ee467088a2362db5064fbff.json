{"ast":null,"code":"var _jsxFileName = \"/Users/dionysisglytsos/Desktop/Repositories/chatbot/src/main/resources/frontend/src/components/ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport Message from './Message';\nimport MoreOptions from './MoreOptions';\nimport './ChatWindow.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatWindow = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isAtBottom, setIsAtBottom] = useState(true);\n  const messagesEndRef = useRef(null);\n  const chatContainerRef = useRef(null);\n  const sendMessage = async () => {\n    if (input.trim()) {\n      const userMessage = {\n        text: input,\n        user: true\n      };\n      setMessages(prevMessages => [...prevMessages, userMessage]);\n      setInput('');\n      const response = await fetch(`http://localhost:8080/chat?query=${encodeURIComponent(input)}`);\n      const data = await response.text();\n      const botMessage = {\n        text: data,\n        user: false\n      };\n      setMessages(prevMessages => [...prevMessages, botMessage]);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') sendMessage();\n  };\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    const handleScroll = () => {\n      if (chatContainerRef.current) {\n        const {\n          scrollTop,\n          scrollHeight,\n          clientHeight\n        } = chatContainerRef.current;\n        const isBottom = scrollTop + clientHeight >= scrollHeight - 10; // Adjust threshold as needed\n        setIsAtBottom(isBottom);\n      }\n    };\n    const chatContainer = chatContainerRef.current;\n    if (chatContainer) {\n      chatContainer.addEventListener('scroll', handleScroll);\n      // Initial check to see if already at bottom\n      handleScroll();\n    }\n    return () => {\n      if (chatContainer) {\n        chatContainer.removeEventListener('scroll', handleScroll);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    scrollToBottom(); // Scroll to bottom on messages update\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    ref: chatContainerRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: process.env.PUBLIC_URL + '/Vodafone.png',\n        alt: \"Vodafone Logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(Message, {\n        text: msg.text,\n        user: msg.user\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: handleKeyPress,\n        placeholder: \"Type your query here...\",\n        className: \"chat-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        className: \"send-button\",\n        children: \"\\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MoreOptions, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-under\",\n        children: \"Keep in mind that Chatbot responses may not always be relevant.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatWindow, \"1xYm1Xv2+QtI+T8MBCGU3T2Lx1w=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Message","MoreOptions","jsxDEV","_jsxDEV","ChatWindow","_s","messages","setMessages","input","setInput","isAtBottom","setIsAtBottom","messagesEndRef","chatContainerRef","sendMessage","trim","userMessage","text","user","prevMessages","response","fetch","encodeURIComponent","data","botMessage","handleKeyPress","e","key","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleScroll","scrollTop","scrollHeight","clientHeight","isBottom","chatContainer","addEventListener","removeEventListener","className","ref","children","src","process","env","PUBLIC_URL","alt","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","type","value","onChange","target","onKeyPress","placeholder","onClick","_c","$RefreshReg$"],"sources":["/Users/dionysisglytsos/Desktop/Repositories/chatbot/src/main/resources/frontend/src/components/ChatWindow.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport Message from './Message';\nimport MoreOptions from './MoreOptions';\nimport './ChatWindow.css';\n\nconst ChatWindow = () => {\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n    const [isAtBottom, setIsAtBottom] = useState(true);\n    const messagesEndRef = useRef(null);\n    const chatContainerRef = useRef(null);\n\n    const sendMessage = async () => {\n        if (input.trim()) {\n            const userMessage = { text: input, user: true };\n            setMessages((prevMessages) => [...prevMessages, userMessage]);\n            setInput('');\n\n            const response = await fetch(`http://localhost:8080/chat?query=${encodeURIComponent(input)}`);\n            const data = await response.text();\n\n            const botMessage = { text: data, user: false };\n            setMessages((prevMessages) => [...prevMessages, botMessage]);\n        }\n    };\n\n    const handleKeyPress = (e) => {\n        if (e.key === 'Enter') sendMessage();\n    };\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n    };\n\n    useEffect(() => {\n        const handleScroll = () => {\n            if (chatContainerRef.current) {\n                const { scrollTop, scrollHeight, clientHeight } = chatContainerRef.current;\n                const isBottom = scrollTop + clientHeight >= scrollHeight - 10; // Adjust threshold as needed\n                setIsAtBottom(isBottom);\n            }\n        };\n\n        const chatContainer = chatContainerRef.current;\n        if (chatContainer) {\n            chatContainer.addEventListener('scroll', handleScroll);\n            // Initial check to see if already at bottom\n            handleScroll();\n        }\n\n        return () => {\n            if (chatContainer) {\n                chatContainer.removeEventListener('scroll', handleScroll);\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        scrollToBottom(); // Scroll to bottom on messages update\n    }, [messages]);\n\n    return (\n        <div className=\"chat-window\" ref={chatContainerRef}>\n            <div className=\"chat-header\">\n                <img src={process.env.PUBLIC_URL + '/Vodafone.png'} alt=\"Vodafone Logo\"/>\n            </div>\n            <div className=\"messages\">\n                {messages.map((msg, index) => (\n                    <Message key={index} text={msg.text} user={msg.user}/>\n                ))}\n                <div ref={messagesEndRef} /> {/* Empty div for scroll-to-bottom */}\n            </div>\n            <div className=\"input-container\">\n                <input\n                    type=\"text\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Type your query here...\"\n                    className=\"chat-input\"\n                />\n                <button onClick={sendMessage} className=\"send-button\">â†’</button>\n                <MoreOptions />\n\n                <div className=\"text-under\">Keep in mind that Chatbot responses may not always be relevant.</div>\n            </div>\n            {/*{!isAtBottom && <ScrollToBottom scrollToBottom={scrollToBottom} />} /!* Conditionally render ScrollToBottom *!/*/}\n        </div>\n    );\n};\n\nexport default ChatWindow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}